<form [formGroup]="userDetailForm" #form="ngForm" (ngSubmit)="onSubmit()">
    <div class="row">
        <div class="col-12">
            <div>
                <h1>User Detail</h1>
                <app-breadcrumb></app-breadcrumb>
                <a class="breadcrumb-item " routerLink="/app/configuration/user/userList">User List</a>
                <a class="breadcrumb-item active" aria-current="page">{{userID}}</a>
                <div class="text-zero top-right-button-container">
                    <button id="button-save" type="submit" placement="bottom right" class="btn btn-outline-primary ml-2 d-none d-xl-inline-block  btn-lg">Save</button>
                    <button id="button-basic" type="button" placement="bottom right" class="btn btn-outline-primary ml-2 d-none d-xl-inline-block  btn-lg" (click)="update()">Edit</button>
                    <button id="button-basic" type="button" placement="bottom right" class="btn btn-outline-primary ml-2 d-none d-xl-inline-block  btn-lg" routerLink="/app/configuration/user/userList">Close</button>
                </div>
                <div class="separator mb-5"></div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-12">
            <div class="card mb-4">
                <div class="card-body">
                    <ng-container *ngIf="userDetailForm; else loading">
                        <div class="form-row">
                            <div class="form-group col-12 col-md-1 mb-4">
                                <label for="ID">ID</label>
                                <input type="number" class="form-control round" id="ID" value="" formControlName="id">
                            </div>
                            <div class="form-group col-12 col-md-4 mb-4">
                                <label for="name">User Name</label>
                                <input type="text" class="form-control round" id="name" value="" formControlName="name">
                                <div *ngIf=" userDetailForm.get('name').errors?.required && form.submitted" class="invalid-tooltip">User Name is required!</div>
                            </div>
                            <div class="form-group col-12 col-md-4 mb-4">
                                <label>Password</label>
                                <input type="password" class="form-control round" value="" formControlName="password">
                                <div *ngIf="userDetailForm.get('password').errors?.required && form.submitted" class="invalid-tooltip">Password is required!</div>
                            </div>
                            <div class="form-group col-12 col-md-4 mb-4">
                                <label for="role">Role</label>
                                <ng-select [searchable]="true" id="role" formControlName="role" (change)="onRoleOptionsSelected(userDetailForm.value.role)">
                                    <ng-option value="customer">Customer</ng-option>
                                    <ng-option value="supplier">Supplier</ng-option>
                                </ng-select>
                                <div *ngIf="userDetailForm.get('role').errors?.required && form.submitted" class="invalid-tooltip">Role is required!</div>
                            </div>
                            <div class="form-group col-12 col-md-4 mb-4">
                                <label for="currency">Currency</label>
                                <ng-select [searchable]="true" id="currency" formControlName="currency" bindLabel="Currency">
                                    <ng-option *ngFor="let currency of currencyList; let i = index" [value]="currency.Code">
                                        {{currency.Currency}}
                                    </ng-option>
                                </ng-select>
                                <div *ngIf="userDetailForm.get('currency').hasError('required') && form.submitted" class="invalid-tooltip">
                                    Currency is required!</div>
                            </div>
                            <div *ngIf="isCustomerShown" class="form-group col-12 col-md-4 mb-4">
                                <label for="customerType">Customer Type</label>
                                <ng-select id="customerType" formControlName="customerType" (change)="onTypeOptionsSelected(userDetailForm.value.customerType)">
                                    <ng-option selected>{{ 'input-groups.choose' | translate }}</ng-option>
                                    <ng-option value="individual">Individual</ng-option>
                                    <ng-option value="company">Company</ng-option>
                                </ng-select>
                                <div *ngIf="userDetailForm.get('customerType').errors?.required && form.submitted " class="invalid-tooltip">
                                    Customer Type is required!</div>
                            </div>
                            <div *ngIf="isCustomerShown" class="form-group col-12 col-md-4 mb-4">
                                <label for="businessPartnerID">Business Partner ID</label>
                                <ng-select id="businessPartnerID" formControlName="businessPartnerID" (change)="onCustomerOptionsSelected(userDetailForm.value.businessPartnerID)">
                                    <ng-option selected disabled>{{ 'input-groups.choose' | translate }}</ng-option>
                                    <ng-option *ngFor="let customer of businessPartnerID; let i = index" [value]="customer.InternalID">
                                        {{customer.PersonGivenName}} {{customer.PersonFamilyName}} {{customer.BusinessPartnerFormattedName}}
                                    </ng-option>
                                </ng-select>
                                <div *ngIf="userDetailForm.get('businessPartnerID').errors?.required && form.submitted" class="invalid-tooltip">
                                    Business Partner ID is required!</div>
                            </div>
                            <div *ngIf="isCustomerShown" class="form-group col-12 col-md-4 mb-4">
                                <label for="salesUnit">Sales Unit</label>
                                <ng-select id="salesUnit" formControlName="salesUnit" (change)="onSalesUnitOptionsSelected(userDetailForm.value.salesUnit)">
                                    <ng-option selected disabled>{{ 'input-groups.choose' | translate }}</ng-option>
                                    <ng-option *ngFor="let salesUnit of salesUnits; let i = index" [value]="salesUnit.ID">
                                        {{salesUnit.ID}}
                                    </ng-option>
                                </ng-select>
                                <div *ngIf="userDetailForm.get('salesUnit').errors?.required && form.submitted " class="invalid-tooltip">Sales Unit is required!</div>
                            </div>
                            <div *ngIf="isCustomerShown" class="form-group col-12 col-md-4 mb-4">
                                <label for="distributionChannel">Distribution Channel</label>
                                <ng-select id="distributionChannel" formControlName="distributionChannel">
                                    <ng-option selected disabled>{{ 'input-groups.choose' | translate }}</ng-option>
                                    <ng-option value="distributionChannels.DistributionChannelCode">
                                        {{distributionChannels.DistributionChannelCodeText}}
                                    </ng-option>
                                </ng-select>
                                <div *ngIf="userDetailForm.get('distributionChannel').errors?.required && form.submitted" class="invalid-tooltip">Distribution Channel is required!</div>
                            </div>
                            <div *ngIf="isCustomerShown" class="form-group col-12 col-md-4 mb-4">
                                <label for="priceList">Price List</label>
                                <ng-select id="priceList" formControlName="priceList">
                                    <ng-option selected>{{ 'input-groups.choose' | translate }}</ng-option>
                                    <ng-option *ngFor="let priceList of priceLists; let i = index" [value]="priceList.Name">
                                        {{priceList.Name}}
                                    </ng-option>
                                </ng-select>
                                <div *ngIf="userDetailForm.get('priceList').errors?.required && form.submitted" class="invalid-tooltip">Price List is required!</div>
                            </div>
                            <div class="form-group col-12 col-md-4 mb-4">
                                <label class="has-float-label" for="changeStatus">Status</label>
                                <div class="custom-control custom-radio">
                                    <input class="custom-control-input" type="radio" value="active" name="status" formControlName="status" id="reactiveRadios1">
                                    <label class="custom-control-label" for="reactiveRadios1">Active</label>
                                </div>
                                <div class="custom-control custom-radio">
                                    <input class="custom-control-input" type="radio" value="inActive" name="status" formControlName="status" id="reactiveRadios2">
                                    <label class="custom-control-label" for="reactiveRadios2">IN Active</label>
                                </div>
                            </div>
                        </div>
                    </ng-container>
                </div>
            </div>
        </div>
    </div>
</form>
<ng-template #loading>
    <div class="loading"></div>
</ng-template>
